{% include "head.html" %} {% include "navbar.html" %}

<head>
    {% block head %}{% endblock %}
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js"></script>

    <link rel="stylesheet" href="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
    <script src="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
</head>

<body>
    {% block navbar %} {% endblock navbar %}
    <main>
        <h1>Analytics</h1>

        <div class="ct-chart ct-major-eleventh"></div>
    </main>


    <script>
        $(document).ready(function() {
            var data = {
                // A labels array that can contain any sort of values
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'],
                // Our series array that contains series objects or in this case series data arrays
                series: [
                    [70, 2, 4, 2, 0]
                ]
            };

            // Create a new line chart object where as first parameter we pass in a selector
            // that is resolving to our chart container element. The Second parameter
            // is the actual data object.
            new Chartist.Line('.ct-chart', data);
        });

        function getWeights() {
            console.log("GETTING WEIGHTS")

            $.each(response, function(i, item) {
                var $tr = $('#table').append(
                    '<tr id="table"> \
                    <td>' + (item.id) + '</td> \
                    <td>' + (item.weight) + " kg" + '</td> \
                    <td>' + (item.timestamp) + '</td> \
                    </tr>'
                ).appendTo('#table');
            });
            // Get data via AJAX

            // Keep weights only

            // Result should be an array of values.
        }

        $(document).ready(function() {
            $.ajax({
                type: "GET",
                url: "http://192.168.1.63:8080/api/json/all",
                dataType: 'json',
                success: function(data) {
                    weights = []
                    $.each(data, function(i, item) {
                        weights.push(item.weight)
                    });
                    console.table(weights)
                },
                error: function(error) {
                    console.log("Here is the error res: " + JSON.stringify(error));
                }
            });
        });
    </script>
</body>